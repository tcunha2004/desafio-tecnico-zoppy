<!-- ============================================
     CONTAINER PRINCIPAL - Home Page
     ============================================ -->
<div class="main-container">
  <!-- Logo do Github no canto superior esquerdo -->
  <svg
    class="github-logo"
    viewBox="0 0 16 16"
    fill="white"
    width="32"
    height="32"
  >
    <path
      d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
    />
  </svg>

  <!-- Título da aplicação -->
  <h1 class="title">
    Gerencie seus <span>prospects</span> com seus perfis do <span>Github</span>
  </h1>

  <!-- ============================================
       CAROUSEL - Swiper com cards de prospects
       ============================================ -->
  <div class="carousel-container">
    @if (prospects.length === 0) {
    <!-- Estado vazio - Nenhum prospect cadastrado -->
    <div class="empty-state">
      <svg viewBox="0 0 24 24" fill="currentColor" width="48" height="48">
        <path
          d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
        />
      </svg>
      <p>Nenhum prospect cadastrado no momento</p>
      <span class="empty-hint"
        >Clique no botão + para adicionar seu primeiro prospect</span
      >
    </div>
    } @else {
    <swiper-container #swiperContainer init="false">
      <!-- Iteração sobre a lista de prospects -->
      @for (prospect of prospects; track $index) {
      <swiper-slide>
        <div class="prospect-card" (click)="openDetailsModal(prospect)">
          <!-- Avatar do usuário -->
          <div class="avatar">
            <img
              [src]="prospect.avatarUrl"
              [alt]="'Avatar de ' + prospect.name"
              loading="lazy"
            />
          </div>

          <!-- Informações do prospect -->
          <div class="prospect-info">
            <strong class="prospect-name">{{ prospect.name }}</strong>
            <span class="prospect-username">{{ prospect.username }}</span>
          </div>
        </div>
      </swiper-slide>
      }
    </swiper-container>
    }

    <!-- Link para ver lista completa -->
    <span class="navigate" (click)="navigateToList()">Ver lista completa</span>
  </div>

  <!-- ============================================
       BOTÃO - Adicionar novo prospect
       ============================================ -->
  <div class="add-button" (click)="openModal()">
    <svg viewBox="0 0 24 24" fill="white" width="54" height="54">
      <path d="M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z" />
    </svg>
  </div>

  <!-- ============================================
       MODAL - Adicionar novo prospect
       ============================================ -->
  @if (isModalOpen) {
  <div class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <!-- Cabeçalho do modal -->
      <div class="modal-header">
        <h2>Adicionar Prospect</h2>
        <button class="close-button" (click)="closeModal()">
          <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
            />
          </svg>
        </button>
      </div>

      <!-- Corpo do modal -->
      <div class="modal-body">
        <label for="username">Username do GitHub</label>
        <input
          type="text"
          id="username"
          class="modal-input"
          placeholder="Digite o username..."
          [(ngModel)]="newUsername"
          (keyup.enter)="saveProspect()"
          [disabled]="isLoading"
        />
        <!-- Mensagem de erro -->
        @if (errorMessage) {
        <span class="error-message">{{ errorMessage }}</span>
        }
      </div>

      <!-- Rodapé do modal com botão salvar -->
      <div class="modal-footer">
        <button
          class="save-button"
          (click)="saveProspect()"
          [disabled]="!newUsername.trim() || isLoading"
        >
          {{ isLoading ? "Salvando..." : "Salvar" }}
        </button>
      </div>
    </div>
  </div>
  }

  <!-- ============================================
       MODAL - Detalhes do Prospect
       ============================================ -->
  @if (isDetailsModalOpen && selectedProspect) {
  <div class="modal-overlay" (click)="closeDetailsModal()">
    <div class="modal-content details-modal" (click)="$event.stopPropagation()">
      <!-- Botão fechar -->
      <button class="close-button" (click)="closeDetailsModal()">
        <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
          <path
            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
          />
        </svg>
      </button>

      <!-- Avatar grande -->
      <div class="details-avatar">
        <img
          [src]="selectedProspect.avatarUrl"
          [alt]="'Avatar de ' + selectedProspect.name"
        />
      </div>

      <!-- Informações do prospect -->
      <div class="details-info">
        <h2 class="details-name">{{ selectedProspect.name }}</h2>
        <span class="details-username"
          >&#64;{{ selectedProspect.username }}</span
        >

        <!-- Bio -->
        <p class="details-bio">{{ selectedProspect.bio }}</p>

        <!-- Email -->
        <div class="details-email">
          <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
            <path
              d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"
            />
          </svg>
          <span>{{ selectedProspect.email }}</span>
        </div>
      </div>
    </div>
  </div>
  }
</div>
